<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:e5ui="http://efive.ru/uitemplates"
	xmlns:e5ui-comp="http://efive.ru/uitemplates/composite">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<h:outputStylesheet library="css" name="style.css" />
	<title>Трансфузиология</title>
</h:head>

<h:body id="main_body">

	<ui:insert name="running_head"></ui:insert>
	
	<div id="main_global">
	
		<h:form id="main_content_form">
			<c:set var="currentView" value="#{facesContext.viewRoot.viewId}"/>
    		<c:set var="contextPath" value="#{request.contextPath}"/>
		<ui:insert name="left_menu">
			<div id="left_menu">
				<div class="header">Трансфузиология</div>
				<e5ui:menu>
					
					<e5ui:menuItem collapsable="true">
							<f:facet name="content">
								<span>Доноры</span>
							</f:facet>
							<e5ui:menuItem selected="#{currentView eq '/component/filter/donors.xhtml'}">
	                    		<f:facet name="content">
	                    			<h:commandLink action="#{donorFilterableList.openResetFilterPanel()}">
	                    				<f:param name="url" value="/component/filter/donors.xhtml" />
										<h:graphicImage value="#{resource['images:leaf.gif']}" />
            							Доноры
           							</h:commandLink>
	                        	</f:facet>
	                   		</e5ui:menuItem>
<!--  							
							<e5ui:menuItem selected="#{currentView eq '/component/donors.xhtml'}">
	                    		<f:facet name="content">
	                    			<h:outputLink value="/component/donors.xhtml">
	                    				<h:graphicImage value="#{resource['images:leaf.gif']}" />
	                    				По фамилии
	                    			</h:outputLink>
	                        	</f:facet>
	                   		</e5ui:menuItem>
-->	                   		
					</e5ui:menuItem>
				</e5ui:menu>
			</div>
			<div id="split"></div>
		</ui:insert>
		
		<ui:insert name="header">
			<div id="view_header">
				<div id="header">
					<div class="menu">
						<ui:insert name="header_top"></ui:insert>
						<div class="role">
							<div class="top">
								<h:commandLink styleClass="top_link" onclick="return false;">
		                    		<span>
										<h:outputText value="#{sessionManagement.currentRole}" converter="RoleConverter" />
									</span>
								</h:commandLink>
								<div class="sub">
									<ui:repeat value="#{sessionManagement.availableRoles}" var="element">
										<div class="item">
											<h:commandLink action="#{sessionManagement.setCurrentRole(element)}">
												<h:outputText value="#{element}" converter="RoleConverter" />
											</h:commandLink>
										</div>
									</ui:repeat>
								</div>
							</div>
						</div>
						<div class="username">
							<div class="top">
		                    	<h:commandLink styleClass="top_link" onclick="return false;">
		                    		<span>
										<h:outputText value="#{sessionManagement.loggedUser.description}" />
									</span>
								</h:commandLink>
								<div class="sub">
						        	<div class="item">
						        		<h:commandLink action="#{sessionManagement.logOut}">
									        Выход
								        </h:commandLink>
						        	</div>
						        </div>
							</div>
						</div>
					</div>
				</div>
				<div class="actionbar">
					<div class="menu">
						<ui:insert name="header_buttons"></ui:insert>
					</div>
				</div>
			</div>
		</ui:insert>
		
		<ui:insert name="content">
        	Content
        </ui:insert>
        
        </h:form>
        
		<ui:insert name="footer">
			<e5ui-comp:splashScreen id="splash_screen" timeout="0">
	        	<f:facet name="timeoutPanel">
	        		<div style="background-color: white; border-top: solid 1px black; border-bottom: solid 1px black; padding: 30px; text-align: center; margin: 200px auto; width: 300px;">
	        			Пожалуйста, подождите...
	        		</div>
	        	</f:facet>
	        </e5ui-comp:splashScreen>
	        <script>e5ui_splashScreen.startShowOnSubmit('splash_screen', ['main_content_form']);</script>
	        <h:outputStylesheet library="css" name="datatable.css" />
	        <h:outputStylesheet library="css" name="menu.css" />
	        <h:outputStylesheet library="css" name="tablePager.css" />
		</ui:insert>
	</div>
</h:body>

</html>