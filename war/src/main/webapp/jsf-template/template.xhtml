<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
        >

<h:head>
    <h:outputStylesheet library="css" name="menu.css"/>
    <h:outputScript library="js" name="goToFunctionsAndRemoveSelection.js"/>
    <title>ТРФУ ФНКЦ ДГОИ</title>
</h:head>

<h:body id="main_body">

    <ui:insert name="running_head"/>

    <div id="main_global">

        <o:form id="main_content_form" includeRequestParams="true">
            <!-- Блок объявления параметров -->
            <ui:param name="currentView" value="#{facesContext.viewRoot.viewId}"/>
            <ui:param name="isAdministrator" value="#{sessionManagement.authData.administrator}"/>
            <ui:param name="isTherapist" value="#{sessionManagement.authData.therapist}"/>
            <ui:param name="isRegistrator" value="#{sessionManagement.authData.registrator}"/>
            <ui:param name="isExpedition" value="#{sessionManagement.authData.expedition}"/>
            <ui:param name="isOperational" value="#{sessionManagement.authData.operational}"/>
            <ui:param name="isRectification" value="#{sessionManagement.authData.rectification}"/>
            <ui:param name="isDraftOut" value="#{sessionManagement.authData.draftOut}"/>
            <ui:param name="isLabeling" value="#{sessionManagement.authData.labeling}"/>
            <ui:param name="isQuarantine" value="#{sessionManagement.authData.quarantine}"/>
            <ui:param name="isMedical" value="#{sessionManagement.authData.medical}"/>
            <ui:param name="isInControl" value="#{sessionManagement.authData.inControl}"/>
            <ui:param name="isHeadNurse" value="#{sessionManagement.authData.headNurse}"/>
            <ui:param name="isDivisionSuperintendent" value="#{sessionManagement.authData.divisionSuperintendent}"/>
            <ui:param name="isSecondaryProcessing" value="#{sessionManagement.authData.secondaryProcessing}"/>


            <ui:insert name="left_menu">
                <div id="leftMenu">
                    <div id="leftMenuTitle">Трансфузиология ФНКЦ ДГОИ</div>
                    <div id="leftMenuHolder">
                        <ui:include src="leftMenu.xhtml"/>
                    </div>
                </div>
                <div id="split"></div>
            </ui:insert>

            <ui:insert name="header">
                <div id="view_header">
                    <div id="header">
                        <div class="menu">
                            <ui:insert name="header_top"/>
                            <p:menuButton value="#{sessionManagement.loggedUser.getDescription()}" style="float:right; width:10em;">
                                <p:menuitem value="Выход" action="#{sessionManagement.logOut}"/>
                            </p:menuButton>
                            <p:selectOneMenu id="roleSelect" value="#{sessionManagement.currentRole}" converter="RoleConverter">
                                <f:selectItems value="#{sessionManagement.authData.roles}"/>
                                <p:ajax event="change" listener="#{sessionManagement.redirectToBackUrl}"/>
                            </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="actionbar">
                        <div class="menu">
                            <ui:insert name="header_buttons"/>
                        </div>
                    </div>
                </div>
            </ui:insert>

            <ui:insert name="content">
                Content
            </ui:insert>

        </o:form>

        <ui:insert name="footer">
        </ui:insert>
    </div>
</h:body>

</html>