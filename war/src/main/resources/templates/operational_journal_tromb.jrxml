<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report3_test2501" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="806" leftMargin="25" rightMargin="11" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="2.4793388429752086"/>
	<property name="ireport.x" value="572"/>
	<property name="ireport.y" value="1192"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Brigada">
		<parameter name="FactDonationDate" class="java.util.Date">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT trfu_operational_crew.`registered` AS trfu_operational_crew_registered
     , person.`firstName` AS person_firstName
     , person.`lastName` AS person_lastName
     , person.`middleName` AS person_middleName
     , appointment.name AS person_appointment
FROM
  `trfu_operational_crew` trfu_operational_crew
INNER JOIN `trfu_operational_crew_members` trfu_operational_crew_members
ON trfu_operational_crew.`id` = trfu_operational_crew_members.`crew_id`
INNER JOIN `person` person
ON trfu_operational_crew_members.`member_id` = person.`id`
INNER JOIN `appointments` appointment
ON person.appointment_id = appointment.id
and DATE(trfu_operational_crew.`registered`)=DATE($P{FactDonationDate})]]>
		</queryString>
		<field name="trfu_operational_crew_registered" class="java.sql.Timestamp"/>
		<field name="person_firstName" class="java.lang.String"/>
		<field name="person_lastName" class="java.lang.String"/>
		<field name="person_middleName" class="java.lang.String"/>
		<field name="person_appointment" class="java.lang.String"/>
	</subDataset>
	<subDataset name="BloodSystem">
		<parameter name="FactDonationDate" class="java.util.Date" isForPrompting="false"/>
		<queryString>
			<![CDATA[SELECT sys_types.value as name

FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_blood_donation_requests_trfu_blood_systems blood_systems
ON req.id = blood_systems.trfu_blood_donation_requests_id
INNER JOIN trfu_blood_systems systems
ON blood_systems.bloodSystems_id = systems.id
INNER JOIN trfu_blood_system_types sys_types
ON systems.type_id = sys_types.id

WHERE
date(req.factDate)=date($P{FactDonationDate})
group by systems.type_id]]>
		</queryString>
		<field name="name" class="java.lang.String"/>
	</subDataset>
	<subDataset name="Analyzes">
		<parameter name="FactDonationDate" class="java.util.Date"/>
		<parameter name="request_id" class="java.lang.String"/>
		<queryString>
			<![CDATA[(select *, count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE '0 (I)Отрицательный' THEN 1 ELSE NULL END) AS 1minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'А (II)Отрицательный' THEN 1 ELSE NULL END) AS 2minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'В (III)Отрицательный' THEN 1 ELSE NULL END) AS 3minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'АВ (IV)Отрицательный' THEN 1 ELSE NULL END) AS 4minus_count  from
  (
SELECT tests.value AS gruppa
     , req.id
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_external_appointment_tests appoint
ON exam.appointment_id = appoint.appointment_id
INNER JOIN trfu_tests tests
ON appoint.test_id = tests.id
INNER JOIN trfu_analysis_types anal_appoint
ON anal_appoint.id = tests.type_id AND anal_appoint.value = 'Группа крови(экспресс-диагностика)'
WHERE
  factDonationResult.`donationType_id` = '3'
and req.id=$P{request_id}
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table1
  join
  (
SELECT tests.value AS rezus
     , req.id
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_external_appointment_tests appoint
ON exam.appointment_id = appoint.appointment_id
INNER JOIN trfu_tests tests
ON appoint.test_id = tests.id
INNER JOIN trfu_analysis_types anal_appoint
ON anal_appoint.id = tests.type_id AND anal_appoint.value = 'Rh - фактор'
WHERE
  factDonationResult.`donationType_id` = '3'
and req.id=$P{request_id}
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table2
on table1.id=table2.id
    group by table1.id)

  UNION

  (select * , count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE '0 (I)Отрицательный' THEN 1 ELSE NULL END) AS 1minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'А (II)Отрицательный' THEN 1 ELSE NULL END) AS 2minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'В (III)Отрицательный' THEN 1 ELSE NULL END) AS 3minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'АВ (IV)Отрицательный' THEN 1 ELSE NULL END) AS 4minus_count
    from
    (
SELECT tests.value AS gruppa
     , req.id
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_examination_requests_trfu_tests exam_test
ON exam_test.trfu_examination_requests_id = exam.id
INNER JOIN trfu_tests tests
ON exam_test.tests_id = tests.id
INNER JOIN trfu_analysis_types anal_exam
ON anal_exam.id = tests.type_id AND anal_exam.value = 'Группа крови(экспресс-диагностика)'
WHERE
  factDonationResult.`donationType_id` = '3'
and req.id=$P{request_id}
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table1
    join

(
SELECT tests.value AS rezus
     , req.id
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_examination_requests_trfu_tests exam_test
ON exam_test.trfu_examination_requests_id = exam.id
INNER JOIN trfu_tests tests
ON exam_test.tests_id = tests.id
INNER JOIN trfu_analysis_types anal_exam
ON anal_exam.id = tests.type_id AND anal_exam.value = 'Rh - фактор'
WHERE
  factDonationResult.`donationType_id` = '3'
and req.id=$P{request_id}
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table2
on table1.id=table2.id
    group by table1.id
    )]]>
		</queryString>
		<field name="gruppa" class="java.lang.String"/>
		<field name="id" class="java.lang.Integer"/>
		<field name="rezus" class="java.lang.String"/>
		<field name="1minus_count" class="java.lang.Long"/>
		<field name="2minus_count" class="java.lang.Long"/>
		<field name="3minus_count" class="java.lang.Long"/>
		<field name="4minus_count" class="java.lang.Long"/>
	</subDataset>
	<subDataset name="AnalyzesCount">
		<parameter name="FactDonationDate" class="java.util.Date"/>
		<queryString>
			<![CDATA[(select count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE '0 (I)Отрицательный' THEN 1 ELSE NULL END) AS 1minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'А (II)Отрицательный' THEN 1 ELSE NULL END) AS 2minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'В (III)Отрицательный' THEN 1 ELSE NULL END) AS 3minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'АВ (IV)Отрицательный' THEN 1 ELSE NULL END) AS 4minus_count  from
  (
SELECT tests.value AS gruppa
     , req.id, date(req.factDate) as factDate
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_external_appointment_tests appoint
ON exam.appointment_id = appoint.appointment_id
INNER JOIN trfu_tests tests
ON appoint.test_id = tests.id
INNER JOIN trfu_analysis_types anal_appoint
ON anal_appoint.id = tests.type_id AND anal_appoint.value = 'Группа крови(экспресс-диагностика)'
WHERE
  factDonationResult.`donationType_id` = '3'
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table1
  join
  (
SELECT tests.value AS rezus
     , req.id, date(req.factDate) as factDate
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_external_appointment_tests appoint
ON exam.appointment_id = appoint.appointment_id
INNER JOIN trfu_tests tests
ON appoint.test_id = tests.id
INNER JOIN trfu_analysis_types anal_appoint
ON anal_appoint.id = tests.type_id AND anal_appoint.value = 'Rh - фактор'
WHERE
  factDonationResult.`donationType_id` = '3'
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table2
on table1.id=table2.id
    group by table1.factDate
)

  UNION

  (select count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE '0 (I)Отрицательный' THEN 1 ELSE NULL END) AS 1minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'А (II)Отрицательный' THEN 1 ELSE NULL END) AS 2minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'В (III)Отрицательный' THEN 1 ELSE NULL END) AS 3minus_count,
count(CASE WHEN concat(table1.gruppa,table2.rezus) LIKE 'АВ (IV)Отрицательный' THEN 1 ELSE NULL END) AS 4minus_count
    from
    (
SELECT tests.value AS gruppa
     , req.id, date(req.factDate) as factDate
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_examination_requests_trfu_tests exam_test
ON exam_test.trfu_examination_requests_id = exam.id
INNER JOIN trfu_tests tests
ON exam_test.tests_id = tests.id
INNER JOIN trfu_analysis_types anal_exam
ON anal_exam.id = tests.type_id AND anal_exam.value = 'Группа крови(экспресс-диагностика)'
WHERE
  factDonationResult.`donationType_id` = '3'
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table1
    join

(
SELECT tests.value AS rezus
     , req.id, date(req.factDate) as factDate
FROM
  trfu_blood_donation_requests req
INNER JOIN trfu_examination_requests exam
ON req.examination_id = exam.id
INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
ON req.id = factDonationEntries.donation_id
INNER JOIN trfu_blood_donation_entries factDonationResult
ON factDonationEntries.entry_id = factDonationResult.id
INNER JOIN trfu_examination_requests_trfu_tests exam_test
ON exam_test.trfu_examination_requests_id = exam.id
INNER JOIN trfu_tests tests
ON exam_test.tests_id = tests.id
INNER JOIN trfu_analysis_types anal_exam
ON anal_exam.id = tests.type_id AND anal_exam.value = 'Rh - фактор'
WHERE
  factDonationResult.`donationType_id` = '3'
  AND date(req.factDate) = DATE($P{FactDonationDate})) as table2
on table1.id=table2.id
    group by table1.factDate
)]]>
		</queryString>
		<field name="1minus_count" class="java.lang.Long"/>
		<field name="2minus_count" class="java.lang.Long"/>
		<field name="3minus_count" class="java.lang.Long"/>
		<field name="4minus_count" class="java.lang.Long"/>
		<variable name="1minus_count" class="java.lang.Long" calculation="Sum">
			<variableExpression><![CDATA[$F{1minus_count}]]></variableExpression>
		</variable>
		<variable name="2minus_count" class="java.lang.Long" calculation="Sum">
			<variableExpression><![CDATA[$F{2minus_count}]]></variableExpression>
		</variable>
		<variable name="3minus_count" class="java.lang.Long" calculation="Sum">
			<variableExpression><![CDATA[$F{3minus_count}]]></variableExpression>
		</variable>
		<variable name="4minus_count" class="java.lang.Long" calculation="Sum">
			<variableExpression><![CDATA[$F{4minus_count}]]></variableExpression>
		</variable>
	</subDataset>
	<subDataset name="Brak">
		<parameter name="FactDonationDate" class="java.util.Date"/>
		<queryString>
			<![CDATA[SELECT
trfu_blood_component_types.value
     , count(trfu_blood_components.id) as comp_count
     , sum(trfu_blood_components.volume) as comp_volume,
     trfu_blood_component_types.`value` AS trfu_blood_component_types_value,
     trfu_blood_components.`donationDate` AS trfu_blood_components_donationDate,
     trfu_blood_components.`donationId` AS trfu_blood_components_donationId,
     trfu_blood_components.`volume` AS trfu_blood_components_volume,
     trfu_blood_donation_entries.`donationType_id` AS trfu_blood_donation_entries_donationType_id,
     wf_history.`id` AS wf_history_id,
     wf_history.`action_id` AS wf_history_action_id,
     wf_history.`commentary` AS wf_history_commentary,
     wf_history.`created` AS wf_history_created,
     wf_history.`docType` AS wf_history_docType,
     wf_history.`endDate` AS wf_history_endDate,
     wf_history.`from_status_id` AS wf_history_from_status_id,
     wf_history.`parent_id` AS wf_history_parent_id,
     wf_history.`processed` AS wf_history_processed,
     wf_history.`startDate` AS wf_history_startDate,
     wf_history.`to_status_id` AS wf_history_to_status_id,
     wf_history.`owner_id` AS wf_history_owner_id
FROM
     `trfu_blood_component_types` trfu_blood_component_types INNER JOIN `trfu_blood_components` trfu_blood_components ON trfu_blood_component_types.`id` = trfu_blood_components.`componentType_id`
     INNER JOIN `trfu_blood_component_history` trfu_blood_component_history ON trfu_blood_components.`id` = trfu_blood_component_history.`component_id`
     INNER JOIN `trfu_blood_donation_requests` trfu_blood_donation_requests ON trfu_blood_components.`donationId` = trfu_blood_donation_requests.`id`
     INNER JOIN `trfu_blood_donation_request_fact_entries` trfu_blood_donation_request_fact_entries ON trfu_blood_donation_requests.`id` = trfu_blood_donation_request_fact_entries.`donation_id`
     INNER JOIN `trfu_blood_donation_entries` trfu_blood_donation_entries ON trfu_blood_donation_request_fact_entries.`entry_id` = trfu_blood_donation_entries.`id`
     INNER JOIN `wf_history` wf_history ON trfu_blood_component_history.`history_entry_id` = wf_history.`id`
WHERE
trfu_blood_donation_entries.`donationType_id` = 3
  AND trfu_blood_components.maker_id = '11'
  AND date(trfu_blood_components.donationDate) = date($P{FactDonationDate})
  AND wf_history.to_status_id = -1
GROUP BY
  trfu_blood_component_types.id]]>
		</queryString>
		<field name="value" class="java.lang.String"/>
		<field name="comp_count" class="java.lang.Long"/>
		<field name="comp_volume" class="java.math.BigDecimal"/>
		<field name="trfu_blood_component_types_value" class="java.lang.String"/>
		<field name="trfu_blood_components_donationDate" class="java.sql.Timestamp"/>
		<field name="trfu_blood_components_donationId" class="java.lang.Integer"/>
		<field name="trfu_blood_components_volume" class="java.lang.Integer"/>
		<field name="trfu_blood_donation_entries_donationType_id" class="java.lang.Integer"/>
		<field name="wf_history_id" class="java.lang.Integer"/>
		<field name="wf_history_action_id" class="java.lang.Integer"/>
		<field name="wf_history_commentary" class="java.lang.String"/>
		<field name="wf_history_created" class="java.sql.Timestamp"/>
		<field name="wf_history_docType" class="java.lang.String"/>
		<field name="wf_history_endDate" class="java.sql.Timestamp"/>
		<field name="wf_history_from_status_id" class="java.lang.Integer"/>
		<field name="wf_history_parent_id" class="java.lang.Integer"/>
		<field name="wf_history_processed" class="java.lang.Boolean"/>
		<field name="wf_history_startDate" class="java.sql.Timestamp"/>
		<field name="wf_history_to_status_id" class="java.lang.Integer"/>
		<field name="wf_history_owner_id" class="java.lang.Integer"/>
	</subDataset>
	<parameter name="FactDonationDate" class="java.util.Date"/>
	<parameter name="Superintendent" class="java.lang.String"/>
	<parameter name="Institution" class="java.lang.String">
		<parameterDescription><![CDATA[]]></parameterDescription>
	</parameter>
	<queryString>
		<![CDATA[SELECT req.donor_id AS donor_id
     , req.number AS req_number
     , req.id AS req_id
     , date(req.factDate) AS donationDate
     , req.analysisCount AS analysisCount
     , donors.lastName AS lastName
     , donors.firstName AS firstName
     , donors.middleName AS middleName
     , cl.value AS donorType
     , cl_r.value AS rezus
     , rep.TotalVolume AS factDonationResult_dose
     , rep.totalPltVolume AS totalPlt
     , rep.erVolume AS erVolume
     , rep.plasmaVolume AS plazmvolume
     , rep.acPltVolume AS acPltVolume
     , rep.acPlasmaVolume AS acPlasmaVolume
     , rep.acErVolume AS acErVolume
     , req.complications AS complications
     , rep.recievedAcVolume AS recievedAcVolume
     , (SELECT sum(req.analysisCount)
        FROM
          (((trfu_blood_donation_requests req
        INNER JOIN trfu_classifiers cl
        ON cl.id = req.donorType_id AND cl.category = 'Тип донора')
        INNER JOIN trfu_blood_donation_request_fact_entries factDonationEntries
        ON req.id = factDonationEntries.donation_id)
        INNER JOIN trfu_blood_donation_entries factDonationResult
        ON factDonationEntries.entry_id = factDonationResult.id)
        WHERE
          cl.value LIKE ('%платный%')
          AND date(req.factDate) = date($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as sum_pl_lab,
(select sum(req.analysisCount) from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%безвозмездный%тромбоцитов%')  and DATE(DATE(req.factDate))=DATE(DATE($P{FactDonationDate})) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as sum_bezv_lab,
(select sum(req.analysisCount) from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%платный%первичный%')  and DATE(req.factDate)=DATE($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as sum_pervpl_lab,
	(select sum(factDonationResult.dose) from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%платный%первичный%')  and DATE(req.factDate)=DATE($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as sum_pl_perv_celn,
(select sum(factDonationResult.dose) from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%безвозмездный%тромбоцитов%')  and DATE(req.factDate)=DATE($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as sum_bezv_celn,
(select sum(factDonationResult.dose) from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%платный%')  and DATE(req.factDate)=DATE($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as sum_pl_celn,
	(select count(*)
	from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%безвозмездный%тромбоцитов%')  and DATE(req.factDate)=DATE($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as bezv_count,
	(select count(*) 	from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%платный%')  and DATE(req.factDate)=DATE($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as pl_count,
(select count(*) 	from (((trfu_blood_donation_requests req
	inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
	inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
	inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id)
	where cl.value like ('%платный%первичный%')  and DATE(req.factDate)=DATE($P{FactDonationDate}) and req.deleted="0" and 			factDonationResult.`donationType_id` = '3') as pervpl_count,
(  select  sum(comp.volume)  from trfu_blood_components comp inner join trfu_blood_component_types types on comp.componentType_id=types.id
  inner join trfu_blood_donation_requests req on comp.parentNumber=req.number
  inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора'
  inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id
  where types.value like '%тромбоцит%' and cl.value like ('%безвозмездный%тромбоцитов%')   and date(comp.donationDate)=DATE($P{FactDonationDate})
and comp.maker_id='11' and comp.status_id !='-1' and comp.status_id !='100' and comp.deleted='0') as bezv_tromb_count,
(  select  sum(comp.volume)  from trfu_blood_components comp inner join trfu_blood_component_types types on comp.componentType_id=types.id
  inner join trfu_blood_donation_requests req on comp.parentNumber=req.number
  inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора'
  inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id
  where types.value like '%эри%' and cl.value like ('%безвозмездный%тромбоцитов%')  and date(comp.donationDate)=DATE($P{FactDonationDate})
and comp.maker_id='11' and comp.status_id !='-1' and comp.status_id !='100' and comp.deleted='0') as bezv_ervzv_count,
(select count(rep.totalPltVolume)
from trfu_blood_donation_requests req  inner join trfu_pheresis_reports rep on req.report_id=rep.id
inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id
inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id
  where  date(req.factDate)=DATE($P{FactDonationDate}) and  factDonationResult.`donationType_id` = '3'  and req.deleted="0" and rep.totalPltVolume!=0 ) as tromb_emk_count,
(select count(rep.erVolume)
from trfu_blood_donation_requests req  inner join trfu_pheresis_reports rep on req.report_id=rep.id
inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id
inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id
  where  date(req.factDate)=DATE($P{FactDonationDate}) and  factDonationResult.`donationType_id` = '3'  and req.deleted="0" and rep.erVolume!=0) as ervzv_emk_count,
(select count(rep.plasmaVolume)
from trfu_blood_donation_requests req  inner join trfu_pheresis_reports rep on req.report_id=rep.id
inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id
inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id
  where  date(req.factDate)=DATE($P{FactDonationDate}) and  factDonationResult.`donationType_id` = '3'  and req.deleted="0" and rep.plasmaVolume!=0) as plasm_emk_count
 from ((((((trfu_blood_donation_requests req inner join trfu_donors donors on donors.id = req.donor_id)
inner join trfu_blood_groups bg on donors.bloodGroup_id = bg.id)
inner join trfu_classifiers cl_r on donors.rhesusFactor_id = cl_r.id and cl_r.category='Резус-фактор')
inner join trfu_classifiers cl on cl.id = req.donorType_id and cl.category='Тип донора')
inner join trfu_blood_donation_request_fact_entries factDonationEntries on req.id = factDonationEntries.donation_id)
inner join trfu_pheresis_reports rep on req.report_id=rep.id)
inner join trfu_blood_donation_entries factDonationResult on factDonationEntries.entry_id = factDonationResult.id

where factDonationResult.donationType_id = '3' and req.factDate=DATE($P{FactDonationDate}) and req.deleted="0"

group by req_number]]>
	</queryString>
	<field name="donor_id" class="java.lang.Integer"/>
	<field name="req_number" class="java.lang.String"/>
	<field name="req_id" class="java.lang.Integer"/>
	<field name="donationDate" class="java.sql.Date"/>
	<field name="analysisCount" class="java.lang.Integer"/>
	<field name="lastName" class="java.lang.String"/>
	<field name="firstName" class="java.lang.String"/>
	<field name="middleName" class="java.lang.String"/>
	<field name="donorType" class="java.lang.String"/>
	<field name="rezus" class="java.lang.String"/>
	<field name="factDonationResult_dose" class="java.lang.Double"/>
	<field name="totalPlt" class="java.lang.Double"/>
	<field name="erVolume" class="java.lang.Double"/>
	<field name="plazmvolume" class="java.lang.Double"/>
	<field name="acPltVolume" class="java.lang.Double"/>
	<field name="acPlasmaVolume" class="java.lang.Double"/>
	<field name="acErVolume" class="java.lang.Double"/>
	<field name="complications" class="java.lang.String"/>
	<field name="recievedAcVolume" class="java.lang.Double"/>
	<field name="sum_pl_lab" class="java.math.BigDecimal"/>
	<field name="sum_bezv_lab" class="java.math.BigDecimal"/>
	<field name="sum_pervpl_lab" class="java.math.BigDecimal"/>
	<field name="sum_pl_perv_celn" class="java.math.BigDecimal"/>
	<field name="sum_bezv_celn" class="java.math.BigDecimal"/>
	<field name="sum_pl_celn" class="java.math.BigDecimal"/>
	<field name="bezv_count" class="java.lang.Long"/>
	<field name="pl_count" class="java.lang.Long"/>
	<field name="pervpl_count" class="java.lang.Long"/>
	<field name="bezv_tromb_count" class="java.math.BigDecimal"/>
	<field name="bezv_ervzv_count" class="java.math.BigDecimal"/>
	<field name="tromb_emk_count" class="java.lang.Long"/>
	<field name="ervzv_emk_count" class="java.lang.Long"/>
	<field name="plasm_emk_count" class="java.lang.Long"/>
	<variable name="factDonationResult_dose_1" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{factDonationResult_dose}]]></variableExpression>
	</variable>
	<variable name="analysisCount_1" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{analysisCount}]]></variableExpression>
	</variable>
	<variable name="analysisCount_2" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{analysisCount}]]></variableExpression>
	</variable>
	<variable name="analysisCount_3" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{analysisCount}]]></variableExpression>
	</variable>
	<variable name="factDonationResult_dose_2" class="java.lang.Integer" resetType="Group" resetGroup="DonorTypeGroup" calculation="Sum">
		<variableExpression><![CDATA[$F{factDonationResult_dose}]]></variableExpression>
	</variable>
	<variable name="analysisCount_4" class="java.lang.Integer" resetType="Group" resetGroup="DonorTypeGroup" calculation="Sum">
		<variableExpression><![CDATA[$F{analysisCount}]]></variableExpression>
	</variable>
	<variable name="factDonationResult_dose_3" class="java.lang.Integer" resetType="Group" resetGroup="DonorTypeGroup" calculation="Sum">
		<variableExpression><![CDATA[$F{factDonationResult_dose}]]></variableExpression>
	</variable>
	<variable name="req_number_1" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{req_number}]]></variableExpression>
	</variable>
	<variable name="factDonationResult_dose_4" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{factDonationResult_dose}]]></variableExpression>
	</variable>
	<variable name="analysisCount_5" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{analysisCount}]]></variableExpression>
	</variable>
	<variable name="req_number_2" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{req_number}]]></variableExpression>
	</variable>
	<variable name="req_number_3" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{req_number}]]></variableExpression>
	</variable>
	<variable name="req_number_4" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{req_number}]]></variableExpression>
	</variable>
	<variable name="bezv_count_1" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA[$F{bezv_count}]]></variableExpression>
	</variable>
	<variable name="Rezus" class="java.lang.String">
		<variableExpression><![CDATA[equals($F{rezus})]]></variableExpression>
	</variable>
	<variable name="analysisCount_6" class="java.lang.Integer" resetType="Group" resetGroup="DonorTypeGroup" calculation="Sum">
		<variableExpression><![CDATA[$F{analysisCount}]]></variableExpression>
	</variable>
	<variable name="rezus_1" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{rezus}]]></variableExpression>
	</variable>
	<variable name="factDonationResult_dose_5" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{factDonationResult_dose}]]></variableExpression>
	</variable>
	<variable name="sum_pl_celn_1" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{sum_pl_celn}]]></variableExpression>
	</variable>
	<variable name="sum_pl_celn_2" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{sum_pl_celn}]]></variableExpression>
	</variable>
	<variable name="pl_kons_kr_itog" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{sum_pl_celn}.add((java.math.BigDecimal.valueOf( 63 )).multiply(java.math.BigDecimal.valueOf($F{pl_count})))]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="perv_pl_kons_kr_itog" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{sum_pl_perv_celn}.add((java.math.BigDecimal.valueOf( 63 )).multiply(java.math.BigDecimal.valueOf($F{pervpl_count})))]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="bezv_kons_kr_itog" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{sum_bezv_celn}.add((java.math.BigDecimal.valueOf( 63 )).multiply(java.math.BigDecimal.valueOf($F{bezv_count})))]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="sum_pl_lab" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{sum_pl_lab}.divide( java.math.BigDecimal.valueOf( 2.00 ))]]></variableExpression>
	</variable>
	<variable name="sum_pervpl_lab" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{sum_pervpl_lab}.divide( java.math.BigDecimal.valueOf( 2.00 ))]]></variableExpression>
	</variable>
	<variable name="sum_bezv_lab" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{sum_bezv_lab}.divide( java.math.BigDecimal.valueOf( 2.00 ))]]></variableExpression>
	</variable>
	<variable name="kons_kr_pogr" class="java.lang.Double" incrementType="Group" incrementGroup="DonorTypeGroup">
		<variableExpression><![CDATA[$F{factDonationResult_dose}+$F{acPltVolume}+$F{acPlasmaVolume}+$F{acErVolume}]]></variableExpression>
	</variable>
	<variable name="kons_kr_group_itog" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$V{kons_kr_pogr}]]></variableExpression>
	</variable>
	<variable name="reinf_group_itog" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{factDonationResult_dose}+$F{recievedAcVolume}-$F{totalPlt}-$F{erVolume}-$F{plazmvolume}]]></variableExpression>
	</variable>
	<variable name="totalPlt" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{totalPlt}]]></variableExpression>
	</variable>
	<variable name="erVolume" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{erVolume}]]></variableExpression>
	</variable>
	<variable name="vsego_produkt" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{factDonationResult_dose}+$F{recievedAcVolume}]]></variableExpression>
	</variable>
	<variable name="ErVolumePlusAc" class="java.lang.Double">
		<variableExpression><![CDATA[$F{acErVolume}+$F{erVolume}]]></variableExpression>
	</variable>
	<variable name="plasmVolume" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{plazmvolume}]]></variableExpression>
	</variable>
	<group name="DonorTypeGroup">
		<groupExpression><![CDATA[$F{donorType}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<textField>
					<reportElement style="table_TD" x="0" y="0" width="761" height="20"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{donorType}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="49">
				<staticText>
					<reportElement style="table_TD" x="0" y="0" width="287" height="49"/>
					<textElement>
						<font fontName="Tahoma"/>
					</textElement>
					<text><![CDATA[Всего по донорам типа]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="287" y="17" width="43" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="false"/>
					</textElement>
					<text><![CDATA[в емк]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="330" y="17" width="40" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="false"/>
					</textElement>
					<text><![CDATA[лаб]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="370" y="17" width="30" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="false"/>
					</textElement>
					<text><![CDATA[б/к]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="287" y="0" width="113" height="17" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="false"/>
					</textElement>
					<text><![CDATA[Цельной крови]]></text>
				</staticText>
				<textField>
					<reportElement x="12" y="24" width="257" height="20"/>
					<textElement>
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{donorType}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="table_TD" x="287" y="32" width="43" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{factDonationResult_dose_2}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="table_TD" x="330" y="32" width="40" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{analysisCount_4}]]></textFieldExpression>
				</textField>
				<textField pattern="">
					<reportElement style="table_TD" x="370" y="32" width="30" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{factDonationResult_dose_2}+$V{analysisCount_4}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="461" y="0" width="54" height="32" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="true"/>
					</textElement>
					<text><![CDATA[Ре-инф.]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="400" y="0" width="61" height="32" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="true"/>
					</textElement>
					<text><![CDATA[Конс.крови]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="515" y="0" width="246" height="17" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="true"/>
					</textElement>
					<text><![CDATA[Крови в лаб.]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="601" y="17" width="85" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="false"/>
					</textElement>
					<text><![CDATA[гемат.]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="686" y="17" width="75" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" markup="none">
						<font fontName="Tahoma" size="11" isBold="false"/>
					</textElement>
					<text><![CDATA[бак.]]></text>
				</staticText>
				<staticText>
					<reportElement style="table_TD" mode="Opaque" x="515" y="17" width="86" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
					<textElement textAlignment="Center" verticalAlignment="Top" markup="none">
						<font fontName="Tahoma" size="11" isBold="false"/>
					</textElement>
					<text><![CDATA[серол.]]></text>
				</staticText>
				<textField>
					<reportElement style="table_TD" x="515" y="32" width="86" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{analysisCount_6}/2]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="table_TD" x="601" y="32" width="85" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{analysisCount_6}/2]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Group" evaluationGroup="DonorTypeGroup" pattern="###0">
					<reportElement style="table_TD" x="400" y="32" width="61" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{vsego_produkt}]]></textFieldExpression>
				</textField>
				<textField pattern="###0">
					<reportElement style="table_TD" x="461" y="32" width="54" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{reinf_group_itog}]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Group" evaluationGroup="DonorTypeGroup">
					<reportElement style="table_TD" x="686" y="32" width="75" height="17"/>
					<textElement textAlignment="Center">
						<font fontName="Tahoma"/>
					</textElement>
					<textFieldExpression><![CDATA["0"]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="160">
			<staticText>
				<reportElement positionType="Float" x="26" y="20" width="670" height="20"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[ЖУРНАЛ ОПЕРАЦИОННОЙ (доноры тромбоцитов)]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" x="297" y="40" width="44" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[за]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" x="26" y="60" width="670" height="19"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[только доноры тромбоцитов]]></text>
			</staticText>
			<textField pattern="dd.MM.yyyy">
				<reportElement positionType="Float" x="343" y="40" width="100" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{FactDonationDate}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="696" y="2" width="97" height="18"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<text><![CDATA[Форма 411/у-П3]]></text>
			</staticText>
			<staticText>
				<reportElement positionType="Float" x="2" y="79" width="101" height="20"/>
				<textElement>
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<text><![CDATA[Бригада:]]></text>
			</staticText>
			<componentElement>
				<reportElement key="table 1" x="2" y="99" width="360" height="61"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="Brigada">
						<datasetParameter name="FactDonationDate">
							<datasetParameterExpression><![CDATA[$P{FactDonationDate}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="180">
						<jr:detailCell height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="180" height="18"/>
								<textElement>
									<font fontName="Tahoma" size="9"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{person_lastName}+" "+$F{person_firstName}+" "+$F{person_middleName}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="190">
						<jr:detailCell height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="190" height="18"/>
								<textElement>
									<font fontName="Tahoma" size="9"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{person_appointment}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<componentElement>
				<reportElement key="table" x="362" y="102" width="444" height="58"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="BloodSystem">
						<datasetParameter name="FactDonationDate">
							<datasetParameterExpression><![CDATA[$P{FactDonationDate}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="444">
						<jr:tableHeader height="0" rowSpan="1"/>
						<jr:columnFooter height="0" rowSpan="1"/>
						<jr:detailCell height="30" rowSpan="1">
							<textField>
								<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="444" height="30" isPrintWhenDetailOverflows="true"/>
								<textElement>
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{name}==null?"":$F{name}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="0">
						<jr:detailCell height="30" rowSpan="1"/>
					</jr:column>
					<jr:column width="0">
						<jr:detailCell height="30" rowSpan="1"/>
					</jr:column>
				</jr:table>
			</componentElement>
			<staticText>
				<reportElement positionType="Float" x="362" y="79" width="298" height="20"/>
				<textElement>
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<text><![CDATA[Материалы:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true">
				<reportElement positionType="Float" x="26" y="0" width="670" height="18"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{Institution}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band/>
	</pageHeader>
	<columnHeader>
		<band height="50">
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="35" y="0" width="65" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[№ емкости]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="100" y="0" width="92" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Фамилия, имя, отчество]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="192" y="0" width="39" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Тип]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="231" y="0" width="30" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Гр.кр]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="261" y="0" width="26" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Rh]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="287" y="0" width="113" height="25" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Цельной крови]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="287" y="25" width="38" height="25" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[в емк]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="325" y="25" width="39" height="25" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[лаб]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="364" y="25" width="36" height="25" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[б/к]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="0" y="0" width="35" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[№п/п]]></text>
			</staticText>
			<elementGroup/>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="400" y="0" width="43" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Конс.крови]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="443" y="0" width="38" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Ре-инф.]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="481" y="0" width="120" height="20" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Продукты]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="528" y="20" width="28" height="30" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[тип]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="481" y="20" width="18" height="30" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[N]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="499" y="20" width="29" height="30" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[мл]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="556" y="20" width="45" height="30" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[напр]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="601" y="0" width="160" height="50" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Осложнения]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="37">
			<staticText>
				<reportElement style="table_TD" x="481" y="0" width="18" height="37"/>
				<textElement/>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" x="499" y="0" width="28" height="37"/>
				<textElement/>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" x="527" y="0" width="28" height="37"/>
				<textElement/>
				<text><![CDATA[]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" x="555" y="0" width="46" height="37"/>
				<textElement/>
				<text><![CDATA[]]></text>
			</staticText>
			<textField>
				<reportElement style="table_TD" x="35" y="0" width="65" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{req_number}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="287" y="0" width="38" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{factDonationResult_dose}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="325" y="0" width="39" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{analysisCount}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="364" y="0" width="36" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{factDonationResult_dose}+ $F{analysisCount}.doubleValue()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="100" y="0" width="92" height="37"/>
				<textElement>
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{lastName}+" "+$F{firstName}.toUpperCase().charAt(0)+"."+$F{middleName}.toUpperCase().charAt(0)+"."]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="0" y="0" width="35" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="400" y="0" width="43" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{factDonationResult_dose}+$F{recievedAcVolume}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="601" y="0" width="160" height="37"/>
				<box topPadding="2" leftPadding="3" rightPadding="0"/>
				<textElement>
					<font fontName="Tahoma" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{complications}==null?"Нет":$F{complications}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="481" y="0" width="18" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA["1"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="481" y="12" width="18" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{erVolume}!=0?"2":""]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="499" y="0" width="28" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalPlt}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="499" y="12" width="28" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{erVolume}==0?"":$F{erVolume}.toString()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="527" y="0" width="25" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["КТА"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="527" y="12" width="25" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{erVolume}==0?"":"ЭрВзв"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="555" y="12" width="46" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{erVolume}==0?"":"Экспедиц"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="556" y="0" width="45" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Экспедиц"]]></textFieldExpression>
			</textField>
			<componentElement>
				<reportElement key="table 1" x="231" y="0" width="56" height="37"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="Analyzes">
						<datasetParameter name="FactDonationDate">
							<datasetParameterExpression><![CDATA[$P{FactDonationDate}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="request_id">
							<datasetParameterExpression><![CDATA[$F{req_id}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="31">
						<jr:detailCell height="37" rowSpan="1">
							<textField>
								<reportElement style="table_TD" x="0" y="0" width="31" height="37"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{gruppa}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="26">
						<jr:detailCell height="37" rowSpan="1">
							<textField>
								<reportElement style="table_TD" x="0" y="0" width="26" height="37"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{rezus}.equals( "Положительный" )?$F{rezus}.replace( "Положительный", "+"):$F{rezus}.replace( "Отрицательный", "-")]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<textField>
				<reportElement x="527" y="24" width="25" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{plazmvolume}==0?"":"СЗП"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="556" y="24" width="46" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{plazmvolume}==0?"":"Карантин"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="481" y="24" width="18" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[(($F{erVolume}.doubleValue()!=0)&&($F{plazmvolume}.doubleValue()!=0))?"3":((($F{erVolume}.doubleValue()==0)&&($F{plazmvolume}.doubleValue()!=0))?"2":"")]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="499" y="24" width="29" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{plazmvolume}==0?"":$F{plazmvolume}.toString()]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="443" y="0" width="38" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{factDonationResult_dose}+$F{recievedAcVolume}-$F{totalPlt}-$F{erVolume}-$F{plazmvolume}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="192" y="0" width="39" height="37"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{donorType}.substring( 0, 3 )]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band/>
	</pageFooter>
	<summary>
		<band height="346">
			<textField pattern="###0">
				<reportElement style="table_TD" x="462" y="171" width="44" height="56"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{totalPlt}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="258" y="171" width="39" height="56"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tromb_emk_count}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="table_TD" x="297" y="171" width="165" height="56"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<text><![CDATA[КТА]]></text>
			</staticText>
			<textField pattern="###0">
				<reportElement style="table_TD" x="601" y="29" width="85" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_pl_lab}==null?"0":$V{sum_pl_lab}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Group" evaluationGroup="DonorTypeGroup">
				<reportElement style="table_TD" x="686" y="29" width="75" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="461" y="29" width="54" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="400" y="29" width="61" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<textField pattern="">
				<reportElement style="table_TD" x="358" y="29" width="42" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{sum_pl_celn}==null||$F{sum_pl_lab}==null)?"0":($F{sum_pl_celn}.add($F{sum_pl_lab}))]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="330" y="29" width="28" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sum_pl_lab}==null?"0":$F{sum_pl_lab}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="287" y="29" width="43" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sum_pl_celn}==null?"0":$F{sum_pl_celn}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="192" y="29" width="95" height="60"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pl_count}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="table_TD" x="0" y="29" width="192" height="84"/>
				<textElement>
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Платных]]></text>
			</staticText>
			<elementGroup/>
			<staticText>
				<reportElement style="table_TD" x="0" y="0" width="192" height="29"/>
				<textElement>
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Итого]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" x="192" y="0" width="95" height="29"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Донаций]]></text>
			</staticText>
			<staticText>
				<reportElement x="12" y="69" width="180" height="17"/>
				<textElement>
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Безвозмездных]]></text>
			</staticText>
			<staticText>
				<reportElement x="12" y="51" width="180" height="17"/>
				<textElement>
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[в т.ч. первичноплатных]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" x="0" y="89" width="192" height="24"/>
				<textElement>
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Всего сдали кровь]]></text>
			</staticText>
			<textField>
				<reportElement style="table_TD" x="192" y="89" width="95" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{req_number_1}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="287" y="89" width="43" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{factDonationResult_dose_4}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="330" y="89" width="28" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{analysisCount_5}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="table_TD" x="358" y="89" width="42" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{factDonationResult_dose_4}+$V{analysisCount_5}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="192" y="51" width="95" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pervpl_count}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="192" y="69" width="95" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{bezv_count}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="287" y="0" width="113" height="14" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[Цельной крови]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="330" y="14" width="28" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[лаб]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="358" y="14" width="42" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[б/к]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="287" y="14" width="43" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[в емк]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="400" y="0" width="61" height="29" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Конс.крови]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="515" y="0" width="246" height="14" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Крови в лаб.]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="461" y="0" width="54" height="29" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Ре-инф.]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="515" y="14" width="86" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[серол.]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="601" y="14" width="85" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[гемат.]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="686" y="14" width="75" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[бак.]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" x="0" y="113" width="287" height="30"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Резус-отрицательных]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="287" y="113" width="43" height="17" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[O(I)]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="330" y="113" width="28" height="17" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[A(II)]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="358" y="113" width="42" height="17" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[B(III)]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="400" y="113" width="61" height="17" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[AB(IV)]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" x="0" y="156" width="258" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<text><![CDATA[Направления крови и компонентов]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="462" y="156" width="44" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Объем]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="297" y="156" width="165" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Тип продукта]]></text>
			</staticText>
			<staticText>
				<reportElement style="table_TD" mode="Opaque" x="258" y="156" width="39" height="15" forecolor="#000000" backcolor="#FFFFFF"/>
				<textElement textAlignment="Center" markup="none">
					<font fontName="Tahoma" size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Емк.]]></text>
			</staticText>
			<textField>
				<reportElement x="287" y="69" width="41" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sum_bezv_celn}==null?"0":$V{factDonationResult_dose_4}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="287" y="51" width="41" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sum_pl_perv_celn}==null?"0":$F{sum_pl_perv_celn}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="331" y="51" width="27" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sum_pervpl_lab}==null?"0":$F{sum_pervpl_lab}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="331" y="69" width="27" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sum_bezv_lab}==null?"0":$F{sum_bezv_lab}]]></textFieldExpression>
			</textField>
			<textField pattern="">
				<reportElement x="358" y="51" width="42" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{sum_pl_perv_celn}==null||$F{sum_pervpl_lab}==null)?"0":($F{sum_pl_perv_celn}.add($F{sum_pervpl_lab}))]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="358" y="68" width="42" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[java.math.BigDecimal.valueOf($V{factDonationResult_dose_4}).add(($F{sum_bezv_lab}))]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="524" y="33" width="66" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_pl_lab}==null?"0":$V{sum_pl_lab}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="524" y="51" width="66" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_pervpl_lab}==null?"0":$V{sum_pervpl_lab}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="524" y="69" width="66" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_bezv_lab}==null?"0":$V{sum_bezv_lab}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="400" y="51" width="61" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="400" y="89" width="61" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vsego_produkt}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="400" y="69" width="61" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{vsego_produkt}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="601" y="51" width="85" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_pervpl_lab}==null?"0":$V{sum_pervpl_lab}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="601" y="69" width="85" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_bezv_lab}==null?"0":$V{sum_bezv_lab}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="515" y="89" width="86" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_pl_lab}==null?($V{sum_pervpl_lab}==null?($V{sum_pl_lab}==null?$V{sum_bezv_lab}:$V{sum_bezv_lab}.add($V{sum_pl_lab})):$V{sum_pervpl_lab}.add($V{sum_bezv_lab})):($V{sum_pl_lab}.add($V{sum_bezv_lab})).add($V{sum_pervpl_lab})]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="601" y="89" width="85" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sum_pl_lab}==null?($V{sum_pervpl_lab}==null?($V{sum_pl_lab}==null?$V{sum_bezv_lab}:$V{sum_bezv_lab}.add($V{sum_pl_lab})):$V{sum_pervpl_lab}.add($V{sum_bezv_lab})):($V{sum_pl_lab}.add($V{sum_bezv_lab})).add($V{sum_pervpl_lab})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="261" y="192" width="30" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ervzv_emk_count}==0?"":$F{ervzv_emk_count}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="461" y="69" width="54" height="19"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{reinf_group_itog}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement style="table_TD" x="461" y="89" width="54" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{reinf_group_itog}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="461" y="51" width="54" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="297" y="192" width="164" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ervzv_emk_count}==0?"":"ЭрВзв"]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="463" y="193" width="43" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ervzv_emk_count}==0?"":$V{erVolume}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Group" evaluationGroup="DonorTypeGroup">
				<reportElement x="686" y="50" width="75" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Group" evaluationGroup="DonorTypeGroup">
				<reportElement x="686" y="69" width="75" height="17"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Group" evaluationGroup="DonorTypeGroup">
				<reportElement style="table_TD" x="686" y="89" width="75" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["0"]]></textFieldExpression>
			</textField>
			<componentElement>
				<reportElement key="table 1" x="287" y="130" width="174" height="13"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="AnalyzesCount">
						<datasetParameter name="FactDonationDate">
							<datasetParameterExpression><![CDATA[$P{FactDonationDate}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="43">
						<jr:detailCell height="13" rowSpan="1">
							<textField>
								<reportElement style="table_TD" x="0" y="0" width="43" height="13"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{1minus_count}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="28">
						<jr:detailCell height="13" rowSpan="1">
							<textField>
								<reportElement style="table_TD" x="0" y="0" width="28" height="13"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{2minus_count}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="42">
						<jr:detailCell height="13" rowSpan="1">
							<textField>
								<reportElement style="table_TD" x="0" y="0" width="42" height="13"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{3minus_count}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="61">
						<jr:detailCell height="13" rowSpan="1">
							<textField>
								<reportElement style="table_TD" x="0" y="0" width="61" height="13"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{4minus_count}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<componentElement>
				<reportElement key="table 1" x="257" y="260" width="258" height="50"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="Brak">
						<datasetParameter name="FactDonationDate">
							<datasetParameterExpression><![CDATA[$P{FactDonationDate}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="90">
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:columnFooter height="20" rowSpan="1">
							<textField>
								<reportElement style="table_TD" stretchType="RelativeToTallestObject" x="0" y="0" width="90" height="20" isPrintWhenDetailOverflows="true"/>
								<textElement textAlignment="Center">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{value}.contains( "Тромбоцит" )?"КТА":($F{value}.contains( "Эритроцит" )?"ЭрВзв":($F{value}.contains( "Плазма" )?"Плазма":""))]]></textFieldExpression>
							</textField>
						</jr:columnFooter>
						<jr:detailCell height="20" rowSpan="1">
							<staticText>
								<reportElement style="table_TD" x="0" y="0" width="90" height="20"/>
								<textElement>
									<font fontName="Tahoma"/>
								</textElement>
								<text><![CDATA[Тип компонента]]></text>
							</staticText>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90">
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:columnFooter height="20" rowSpan="1">
							<textField>
								<reportElement style="table_TD" stretchType="RelativeToTallestObject" x="0" y="0" width="90" height="20" isPrintWhenDetailOverflows="true"/>
								<textElement textAlignment="Center">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{comp_count}]]></textFieldExpression>
							</textField>
						</jr:columnFooter>
						<jr:detailCell height="20" rowSpan="1">
							<staticText>
								<reportElement style="table_TD" x="0" y="0" width="90" height="20"/>
								<textElement>
									<font fontName="Tahoma"/>
								</textElement>
								<text><![CDATA[Количество]]></text>
							</staticText>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90">
						<jr:tableFooter height="0" rowSpan="1"/>
						<jr:columnFooter height="20" rowSpan="1">
							<textField>
								<reportElement style="table_TD" stretchType="RelativeToTallestObject" x="0" y="0" width="90" height="20" isPrintWhenDetailOverflows="true"/>
								<textElement textAlignment="Center">
									<font fontName="Tahoma"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{comp_volume}]]></textFieldExpression>
							</textField>
						</jr:columnFooter>
						<jr:detailCell height="20" rowSpan="1">
							<staticText>
								<reportElement style="table_TD" x="0" y="0" width="90" height="20"/>
								<textElement>
									<font fontName="Tahoma"/>
								</textElement>
								<text><![CDATA[Объем, мл]]></text>
							</staticText>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<staticText>
				<reportElement x="257" y="245" width="258" height="15"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma" isBold="true"/>
				</textElement>
				<text><![CDATA[Брак, в т.ч.]]></text>
			</staticText>
			<textField isStretchWithOverflow="true">
				<reportElement x="2" y="326" width="329" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Tahoma"/>
				</textElement>
				<textFieldExpression><![CDATA["Зав. отделением " + $P{Superintendent}+" ____________________"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="261" y="211" width="30" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{plasm_emk_count}==0?"":$F{plasm_emk_count}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="299" y="211" width="164" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{plasm_emk_count}==0?"":"СЗП"]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="463" y="211" width="43" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Tahoma" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{plasm_emk_count}==0?"":$V{plasmVolume}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
